<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>MesaChef ¬∑ Salones</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        secondary: '#475569',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #f8fafc;
            font-family: 'Segoe UI', sans-serif;
        }

        .modal-content {
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        input,
        select,
        textarea {
            border: 1px solid #cbd5e1;
            border-radius: 0.5rem;
            padding: 0.5rem;
            width: 100%;
            outline: none;
        }

        input:focus {
            border-color: #2563eb;
            ring: 2px solid #bfdbfe;
        }

        label {
            font-size: 0.75rem;
            font-weight: 700;
            color: #64748b;
            text-transform: uppercase;
            margin-bottom: 0.25rem;
            display: block;
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-800">

    <!-- NAV -->
    <nav class="bg-white shadow-sm sticky top-0 z-30 border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">

                <!-- LEFT: LOGO & STATUS & HOTEL -->
                <div class="flex items-center gap-6">
                    <!-- MesaChef Logo -->
                    <div class="flex items-center gap-2">
                        <span class="text-2xl">üë®‚Äçüç≥</span>
                        <div class="flex flex-col leading-none">
                            <span class="text-primary font-bold text-lg tracking-tight">MesaChef</span>
                            <span
                                class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Enterprise</span>
                        </div>
                    </div>

                    <!-- Vertical Divider -->
                    <div class="h-8 w-px bg-slate-200"></div>

                    <!-- Connection Status -->
                    <div class="flex items-center gap-2 px-3 py-1 bg-green-50 rounded-full border border-green-100"
                        id="connStatus">
                        <div
                            class="w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]">
                        </div>
                        <span class="text-xs font-bold text-green-700 uppercase tracking-wide">Online</span>
                    </div>

                    <!-- Hotel Identity (Static) -->
                    <div class="flex items-center gap-2">
                        <span class="text-xl">üè®</span>
                        <span id="headerHotelName" class="font-bold text-slate-700 text-lg">Cargando...</span>
                    </div>
                </div>

                <!-- RIGHT: EXIT & NEW EVENT -->
                <div class="flex items-center gap-4">
                    <!-- Exit Button -->
                    <a href="index.html"
                        class="flex items-center gap-2 text-slate-400 hover:text-red-500 font-bold text-sm transition group">
                        <span class="group-hover:-translate-x-1 transition-transform">‚¨Ö</span>
                        Volver al Inicio
                    </a>

                    <div class="h-6 w-px bg-slate-200"></div>

                    <!-- Add Event Button -->
                    <button onclick="openBooking()"
                        class="bg-primary hover:bg-blue-700 text-white px-5 py-2 rounded-lg font-bold shadow-lg shadow-blue-500/30 transition flex items-center gap-2 transform hover:scale-105 active:scale-95">
                        <span class="text-xl leading-none">+</span>
                        <span>Nuevo Evento</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- CONTENT -->
    <div class="max-w-[1600px] mx-auto p-4 lg:p-6" id="app">
        <!-- Toolbar -->
        <div class="flex justify-between items-center mb-6">
            <div class="flex items-center gap-2 bg-white p-1 rounded-lg border shadow-sm">
                <button onclick="changeWeek(-1)"
                    class="p-2 hover:bg-slate-100 rounded text-slate-500 font-bold">‚¨Ö</button>
                <div class="px-4 font-bold text-lg text-slate-800" id="currentWeekRange">Semana Actual</div>
                <button onclick="changeWeek(1)"
                    class="p-2 hover:bg-slate-100 rounded text-slate-500 font-bold">‚û°</button>
                <button onclick="resetToday()"
                    class="text-xs text-blue-600 font-bold ml-2 uppercase tracking-wide">HOY</button>
            </div>
            <div class="border rounded-lg bg-white flex items-center px-4 py-2 gap-2 shadow-sm w-72">
                <span class="text-slate-400">üîç</span>
                <input type="text" placeholder="Buscar evento..." class="border-none p-0 text-sm focus:ring-0 w-full">
            </div>
        </div>

        <!-- Grid -->
        <div id="calendarGrid"
            class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden min-h-[400px]">
            <div class="flex items-center justify-center h-full text-slate-400 gap-2 p-10">
                <span class="animate-spin">‚è≥</span> Conectando con servidor...
            </div>
        </div>
    </div>

    <!-- MODAL -->
    <div id="modal-evt" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div
                    class="relative transform overflow-hidden rounded-xl bg-white text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-5xl modal-content">

                    <div class="bg-white px-6 py-4 border-b flex justify-between items-center">
                        <h3 class="text-xl font-bold text-slate-800">Nuevo Evento</h3>
                        <button onclick="closeModal()"
                            class="text-slate-400 hover:text-slate-600 font-bold text-2xl">&times;</button>
                    </div>

                    <div class="px-6 py-6 space-y-6 bg-slate-50/50">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- FECHA -->
                            <div>
                                <label>FECHA (D√≠a/Mes/A√±o)</label>
                                <input type="date" id="evt-fecha"
                                    class="text-lg font-bold bg-white text-slate-900 shadow-sm border-slate-300">
                            </div>

                            <!-- SALON -->
                            <div>
                                <label>SAL√ìN SELECCIONADO</label>
                                <select id="evt-salon"
                                    class="text-lg font-bold bg-white text-slate-900 shadow-sm border-slate-300">
                                    <option>Cargando salones...</option>
                                </select>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-12 gap-4">
                            <div class="md:col-span-6"><label>Cliente / Empresa / Evento</label><input type="text"
                                    id="evt-nombre" placeholder="Nombre..." class="font-bold"></div>
                            <div class="md:col-span-3"><label>Tel√©fono</label><input type="tel" id="evt-telefono"
                                    placeholder="600..."></div>
                            <div class="md:col-span-3"><label>Email</label><input type="email" id="evt-email"
                                    placeholder="@"></div>
                        </div>

                        <div class="grid grid-cols-2 md:grid-cols-6 gap-4">
                            <div><label>Estado</label><select id="evt-estado"
                                    class="text-amber-600 font-bold bg-amber-50">
                                    <option value="pendiente">‚è≥ Pendiente</option>
                                    <option value="confirmada">‚úÖ Confirmada</option>
                                    <option value="pagada">üí∞ Pagada</option>
                                </select></div>
                            <div><label>Jornada</label><select id="evt-jornada">
                                    <option value="todo">Todo el d√≠a</option>
                                    <option value="ma√±ana">Ma√±ana</option>
                                    <option value="tarde">Tarde</option>
                                </select></div>
                            <div><label>Montaje</label><select id="evt-montaje">
                                    <option>Banquete</option>
                                </select></div>
                            <div><label>Hora</label><input type="time" id="evt-hora"></div>
                            <div><label>Pax A</label><input type="number" id="evt-pax-a"></div>
                            <div><label>Pax N</label><input type="number" id="evt-pax-n"></div>
                        </div>

                        <hr>
                        <div>
                            <div class="flex justify-between mb-2"><label>Servicios</label><button
                                    class="bg-purple-600 text-white text-xs px-2 py-1 rounded font-bold">‚ú® AI
                                    Menu</button></div>
                            <div class="bg-white border rounded shadow-sm">
                                <table class="w-full text-sm">
                                    <thead class="bg-slate-50">
                                        <tr>
                                            <th class="p-2">Fecha</th>
                                            <th class="p-2">Concepto</th>
                                            <th class="p-2 text-center">Uds</th>
                                            <th class="p-2 text-right">Pre</th>
                                            <th class="p-2 text-right">Tot</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody id="services-list"></tbody>
                                </table><button onclick="addServiceRow()"
                                    class="w-full text-center text-blue-600 font-bold py-2 border-t text-xs hover:bg-blue-50">+
                                    A√±adir Servicio</button>
                            </div>
                            <div class="text-right font-bold text-lg mt-2">Total: <span id="evt-total">0.00 ‚Ç¨</span>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div><label>Nota Interna</label><textarea id="evt-nota-interna" rows="2"
                                    class="text-sm"></textarea></div>
                            <div><label>Nota Cliente</label><textarea id="evt-nota-cliente" rows="2"
                                    class="text-sm"></textarea></div>
                        </div>
                    </div>

                    <div class="bg-gray-50 px-6 py-4 flex flex-row-reverse border-t gap-2">
                        <button class="bg-gray-900 text-white font-bold py-2 px-6 rounded hover:bg-black shadow-lg"
                            onclick="saveBooking()">GUARDAR EVENTO</button>
                        <button class="bg-white text-gray-700 font-bold py-2 px-4 border rounded hover:bg-gray-50"
                            onclick="closeModal()">Cancelar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/salones.js"></script>
</body>

</html>